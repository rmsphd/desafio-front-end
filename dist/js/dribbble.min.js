/* ng-infinite-scroll - v1.2.0 - 2015-02-14 */
var mod;mod=angular.module("infinite-scroll",[]),mod.value("THROTTLE_MILLISECONDS",null),mod.directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(a,b,c,d){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return y=angular.element(b),t=null,u=null,i=null,j=null,q=!0,x=!1,w=null,p=function(a){return a=a[0]||a,isNaN(a.offsetHeight)?a.document.documentElement.clientHeight:a.offsetHeight},r=function(a){return a[0].getBoundingClientRect&&!a.css("none")?a[0].getBoundingClientRect().top+s(a):void 0},s=function(a){return a=a[0]||a,isNaN(window.pageYOffset)?a.document.documentElement.scrollTop:a.ownerDocument.defaultView.pageYOffset},o=function(){var b,c,d,g,h;return j===y?(b=p(j)+s(j[0].document.documentElement),d=r(f)+p(f)):(b=p(j),c=0,void 0!==r(j)&&(c=r(j)),d=r(f)-c+p(f)),x&&(d=p((f[0].ownerDocument||f[0].document).documentElement)),g=d-b,h=g<=p(j)*t+1,h?(i=!0,u?e.$$phase||a.$$phase?e.infiniteScroll():e.$apply(e.infiniteScroll):void 0):i=!1},v=function(a,b){var d,e,f;return f=null,e=0,d=function(){var b;return e=(new Date).getTime(),c.cancel(f),f=null,a.call(),b=null},function(){var g,h;return g=(new Date).getTime(),h=b-(g-e),0>=h?(clearTimeout(f),c.cancel(f),f=null,e=g,a.call()):f?void 0:f=c(d,h,1)}},null!=d&&(o=v(o,d)),e.$on("$destroy",function(){return j.unbind("scroll",o),null!=w?(w(),w=null):void 0}),m=function(a){return t=parseFloat(a)||0},e.$watch("infiniteScrollDistance",m),m(e.infiniteScrollDistance),l=function(a){return u=!a,u&&i?(i=!1,o()):void 0},e.$watch("infiniteScrollDisabled",l),l(e.infiniteScrollDisabled),n=function(a){return x=a},e.$watch("infiniteScrollUseDocumentBottom",n),n(e.infiniteScrollUseDocumentBottom),h=function(a){return null!=j&&j.unbind("scroll",o),j=a,null!=a?j.bind("scroll",o):void 0},h(y),e.infiniteScrollListenForEvent&&(w=a.$on(e.infiniteScrollListenForEvent,o)),k=function(a){if(null!=a&&0!==a.length){if(a instanceof HTMLElement?a=angular.element(a):"function"==typeof a.append?a=angular.element(a[a.length-1]):"string"==typeof a&&(a=angular.element(document.querySelector(a))),null!=a)return h(a);throw new Exception("invalid infinite-scroll-container attribute.")}},e.$watch("infiniteScrollContainer",k),k(e.infiniteScrollContainer||[]),null!=g.infiniteScrollParent&&h(angular.element(f.parent())),null!=g.infiniteScrollImmediateCheck&&(q=e.$eval(g.infiniteScrollImmediateCheck)),c(function(){return q?o():void 0},0,1)}}}]);
angular.module("afkl.lazyImage",[]),angular.module("afkl.lazyImage").service("afklSrcSetService",["$window",function(a){"use strict";function b(a){this.src=a.src,this.w=a.w||1/0,this.h=a.h||1/0,this.x=a.x||1}var c=/^[0-9]+$/,d=function(a){for(var b=a.split(/\s/),d={},e=0,f=b.length;f>e;e++){var g=b[e];if(g.length>0){var h=g.slice(-1),i=g.substring(0,g.length-1),j=parseInt(i,10),k=parseFloat(i);i.match(c)&&"w"===h?d[h]=j:i.match(c)&&"h"===h?d[h]=j:isNaN(k)||"x"!==h||(d[h]=k)}}return d},e=function(a,b){for(var c=a[0],d=0,e=a.length;e>d;d++){var f=a[d];b(f,c)&&(c=f)}return c},f=function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d)&&a.splice(c,1)}return a},g=function(b,c){if(b){c||(c={w:a.innerWidth||document.documentElement.clientWidth,h:a.innerHeight||document.documentElement.clientHeight,x:a.devicePixelRatio||1});var d=b.slice(0),g=e(d,function(a,b){return a.w>b.w});f(d,function(){return function(a){return a.w<c.w}}(this)),0===d.length&&(d=[g]);var h=e(d,function(a,b){return a.h>b.h});f(d,function(){return function(a){return a.h<c.h}}(this)),0===d.length&&(d=[h]);var i=e(d,function(a,b){return a.x>b.x});f(d,function(){return function(a){return a.x<c.x}}(this)),0===d.length&&(d=[i]);var j=e(d,function(a,b){return a.w<b.w});f(d,function(a){return a.w>j.w});var k=e(d,function(a,b){return a.h<b.h});f(d,function(a){return a.h>k.h});var l=e(d,function(a,b){return a.x<b.x});return f(d,function(a){return a.x>l.x}),d[0]}},h=function(a){var c=[],e=a.src,f=a.srcset;if(f){var h=function(a){for(var b=0,d=c.length;d>b;b++){var e=c[b];if(e.x===a.x&&e.w===a.w&&e.h===a.h)return}c.push(a)},i=function(){for(var a,c,g=f,i=0,j=[];""!==g;){for(;" "===g.charAt(0);)g=g.slice(1);i=g.indexOf(" "),-1!==i?(a=g.slice(0,i),g=g.slice(i+1),i=g.indexOf(","),-1===i?(c=g,g=""):(c=g.slice(0,i),g=g.slice(i+1)),j.push({url:a,descriptors:c})):(j.push({url:g,descriptors:""}),g="")}for(var k=0,l=j.length;l>k;k++){var m=j[k],n=d(m.descriptors);h(new b({src:m.url,x:n.x,w:n.w,h:n.h}))}e&&h(new b({src:e}))};i();var j=g(c),k={best:j,candidates:c};return c=null,k}};return{get:h,image:g}}]),angular.module("afkl.lazyImage").directive("afklImageContainer",function(){"use strict";return{restrict:"A",controller:["$scope","$element",function(a,b){b.data("afklImageContainer",b)}]}}).directive("afklLazyImage",["$window","$timeout","afklSrcSetService",function(a,b,c){"use strict";var d=function(a){var b,d=c.get({srcset:a});return d&&(b=d.best.src),b};return{restrict:"A",link:function(c,e,f){var g=e.inheritedData("afklImageContainer");g||(g=angular.element(f.afklLazyImageContainer||a));var h,i,j=!1,k=f.afklLazyImage,l=f.afklLazyImageOptions?angular.fromJson(f.afklLazyImageOptions):{},m=null,n=l.offset?l.offset:50,o=l.alt?'alt="'+l.alt+'"':'alt=""',p="afkl-lazy-image-loading",q=function(){if(g.scrollTop){var a=g.scrollTop();if(a)return a}var b=g[0];return void 0!==b.pageYOffset?b.pageYOffset:void 0!==b.scrollTop?b.scrollTop:document.documentElement.scrollTop||0},r=function(){if(g.innerHeight)return g.innerHeight();var a=g[0];return void 0!==a.innerHeight?a.innerHeight:void 0!==a.clientHeight?a.clientHeight:document.documentElement.clientHeight||0},s=function(){if(e.offset)return e.offset().top;var a=e[0].getBoundingClientRect();return a.top+q()-document.documentElement.clientTop},t=function(){return e.offset?e.offset().top-g.offset().top:e[0].getBoundingClientRect().top-g[0].getBoundingClientRect().top},u=function(){l.background?e[0].style.backgroundImage='url("'+m+'")':i[0].src=m},v=function(){j=!0,m=d(k),m&&(l.background||i||(e.addClass(p),i=angular.element("<img "+o+' class="afkl-lazy-image" src=""/>'),i.one("load",x),e.append(i)),u()),g.off("scroll",y)},w=function(){if(j){var a=d(k);a!==m&&(m=a,u())}};w();var x=function(){e.removeClass(p)},y=function(){var b,c,d,e=r(),f=q(),h=g[0]===a?s():t();d=g[0]===a?e+f:e,b=h-d,c=n>=b,c&&!j&&v()},z=function(){b.cancel(h),h=b(function(){w(),y()},300)},A=function(){b.cancel(h),g.off("scroll",y),angular.element(a).off("resize",z),g[0]!==a&&g.off("resize",z),i&&i.remove(),i=h=m=void 0};return g.on("scroll",y),angular.element(a).on("resize",z),g[0]!==a&&g.on("resize",z),f.$observe("afklLazyImage",function(){k=f.afklLazyImage,j&&v()}),l.nolazy&&v(),c.$on("$destroy",function(){return A()}),y()}}}]);
angular.module("dribbbleApp",["ngRoute","infinite-scroll","afkl.lazyImage"]).config(function($routeProvider,$locationProvider){$routeProvider.when("/index.html",{templateUrl:"templates/list.html",controller:"PostListController as postList"}).when("/item.html",{templateUrl:"templates/item.html",controller:"ItemController as item"}),$locationProvider.html5Mode({enabled:!0})}).controller("PostListController",function($http,$location){var postList=this;postList.busy=!1,postList.page=0,postList.posts=[],postList.go=function(path){$location.path("item.html").search("id="+path)},postList.nextPage=function(){postList.busy||(postList.busy=!0,postList.page++,postList.page>postList.maxpage||$http.jsonp("https://api.dribbble.com/shots/popular?page="+postList.page+"&callback=JSON_CALLBACK",{cache:!0}).success(function(data){postList.maxpage=data.pages;for(var i=0;i<data.shots.length;i++)postList.posts.push(data.shots[i]);postList.busy=!1}))}}).controller("ItemController",function($routeParams,$http){var item=this;item.busy||(item.busy=!0,$http.jsonp("https://api.dribbble.com/shots/"+$routeParams.id+"?callback=JSON_CALLBACK",{cache:!0}).success(function(data){item.post=data,document.getElementById("description").innerHTML=item.post.description,item.busy=!1}))});